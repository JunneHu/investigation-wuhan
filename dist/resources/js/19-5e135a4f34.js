webpackJsonp([19],{256:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(149),r=a(717),u=function(e){return e&&e.__esModule?e:{default:e}}(r),n=function(e){var t=e.app;return{userInfo:t.userInfo,authCode:t.authCode,loading:e.loading}};t.default=(0,o.connect)(n)(u.default),e.exports=t.default},717:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(718),r=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=r.default,e.exports=t.default},718:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(35),u=o(r),n=a(148),l=o(n),s=a(10),c=o(s),d=a(13),i=o(d),f=a(11),p=o(f),h=a(12),_=o(h),g=a(2),m=o(g),I=a(160),v=o(I),y=a(36),S=o(y),k=a(5),C="fl7236a0c8e83fa133",w=function(e){function t(e){(0,c.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.auth=function(){var e=parseInt(localStorage.getItem("authCount")||0),t=parseInt(localStorage.getItem("lastAuthTime")||0),a=Math.round((new Date).getTime()/1e3);if(e>2&&a-t<6e4)return void localStorage.setItem("authCount",0);localStorage.setItem("authCount",e+1),localStorage.setItem("lastAuthTime",a);var o=window.location.href.replace(/code=/g,"code2=");localStorage.setItem("redirectUrl",o),window.location.href=k.auth+"?client_id="+C+"&redirect_uri="+o+"&response_type=code&scope=get_user_info&state=xyz"},a}return(0,_.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){var e=v.default.parse(window.location.href,!0).query,t=e.code,a=e.state;t&&!localStorage.getItem("access_token")?this.props.dispatch({type:"app/auth",payload:{code:t,state:a,redirect_uri:localStorage.getItem("redirectUrl")}}):this.props.dispatch({type:"app/getUserInfo"})}},{key:"componentWillReceiveProps",value:function(e){var t=e.userInfo,a=e.authCode;t!==this.props.userInfo&&401===t.status&&(localStorage.setItem("access_token",""),this.auth()),a!==this.props.authCode&&("0"===a.code?(localStorage.setItem("authCount",0),localStorage.setItem("access_token",a.data.access_token),S.default.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("access_token"),this.props.dispatch({type:"app/getUserInfo"})):this.auth())}},{key:"render",value:function(){var e=this.props.userInfo;return m.default.createElement("pre",null,(0,u.default)(e||{},null,2))}}]),t}(m.default.Component);t.default=w,e.exports=t.default}});